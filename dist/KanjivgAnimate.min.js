"use strict";var KanjivgAnimate=function(){function t(t,n){n="undefined"!=typeof n?n:".6s",this.setOnClick(t,n)}return t.prototype.setOnClick=function(t,n){for(var i=document.querySelectorAll(t),e=i.length,r=0;e>r;r++)i[r].onclick=function(){var t=new KVGAnimator(n);return t.play(this),!1}},t}(),KVGAnimator=function(){function t(t){this.time=t}return t.prototype.play=function(t){var n=this.findTarget(t);if(n&&"svg"===n.tagName&&!(n.querySelectorAll("path")<=0)){this.paths=n.querySelectorAll("path"),this.numbers=n.querySelectorAll("text");var i=this.paths.length;this.hideAll(i);var e=0,r=this.paths[e],s=this.numbers[e];this.animatePath(r,s,i,e)}},t.prototype.findTarget=function(t){var n="data-kanjivg-target";if(!t.hasAttribute(n))return t;var i=t.getAttribute(n);return document.querySelector(i)},t.prototype.hideAll=function(t){for(var n=0;t>n;n++)this.paths[n].style.display="none","undefined"!=typeof this.numbers[n]&&(this.numbers[n].style.display="none")},t.prototype.animatePath=function(t,n,i,e){var r=t.getTotalLength();if(t.style.display="block","undefined"!=typeof n&&(n.style.display="block"),t.style.transition=t.style.WebkitTransition="none",t.style.strokeDasharray=r+" "+r,t.style.strokeDashoffset=r,t.getBoundingClientRect(),t.style.transition=t.style.WebkitTransition="stroke-dashoffset "+this.time+" ease-in-out",t.style.strokeDashoffset="0",i>=e){e+=1;var s=this.paths[e],a=this.numbers[e];if(s){var o=this.whichTransitionEvent(t),l=this;t.addEventListener("transitionend",function(){l.animatePath(s,a,i,e)}),o&&t.addEventListener(o,function(){l.animatePath(s,a,i,e)})}}},t.prototype.whichTransitionEvent=function(t){var n,i={transition:"webkitTransitionEnd",OTransition:"oTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",WebkitTransition:"webkitTransitionEnd"};for(n in i)if(void 0!==t.style[n])return i[n];return"transitionend"},t}();module.exports=KanjivgAnimate;